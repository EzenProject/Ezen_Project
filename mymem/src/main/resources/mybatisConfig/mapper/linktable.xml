<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="linktableNs">
	<resultMap type="UserVO" id="colMapping">
		<id column="user_id" property="userId" jdbcType="varchar2" javaType="java.lang.String" /> <!-- 기본키 컬럼에 대해서 정의 -->
		<result column="user_name" property="userName" jdbcType="varchar2" javaType="java.lang.String" />
		<result column="user_password" property="userPassword" jdbcType="varchar2" javaType="java.lang.String" />
		<result column="user_hobby" property="userHobby" jdbcType="varchar2" javaType="java.lang.String" />
	</resultMap>
	
	<select id="" parameterType="string" resultMap="colMapping"> <!-- 어떤 쿼리태그에 resultMap이 사용이 됐다면 resultMap 태그가 반드시 있어야 한다. -->
		<!-- 테이블의 컬럼명은 _(언더바)로 구분을 했다. 스네이크 표기법 사용, VO의 필드명은 합쳐서 카멜 표기법 사용 -->
		select user_id, user_name, user_password, user_hobby from users where user_id = #{userId}
	</select>
	<!-- 테이블의 컬럼 이름과 UserVO의 필드명이 일치하지 않을 경우 -->
	
	<!-- ======================================================================================================================= -->
	
	<!-- VO클래스의 필드 예시 1번 
	class명 => Comment
	필드 목록 => long commentNo, string userId, date regDate, string commentContent;
			  UserVO user; //사용자 정의 VO타입 => user테이블의 VO 객체 타입
			  
	오라클 데이터베이스 쿼리문
	select c.comment_no, c.user_id, c.reg_Date, c.comment_content, u.user_name
		from comment c, user u
		where c.user_id = u.user_id //join
		and c.comment_no = #{commentNo}
	
	<resultMap type="Comment" id="joinOneNone">
		<id column="comment_no" property="commentNo" jdbcType="varchar2" javaType="java.lang.String" />
		<result column="user_id" property="userId" jdbcType="varchar2" javaType="java.lang.String" />
		<result column="reg_date" property="regDate" jdbcType="varchar2" javaType="java.lang.String" />
		<result column="comment_content" property="commentContent" jdbcType="varchar2" javaType="java.lang.String" /> //Comment 테이블의 컬럼들을 위와 동일한 방법으로 컬럼과 필드명을 매칭시킨다.
		<association property="user" column="user_id" javaType="aaa.bbb.ccc.UserVO"> //column은 join이 되는 컬럼을 써준다.
			<id column="user_id" property="userId" jdbcType="varchar2" javaType="java.lang.String" /> //UserVO의 필드들을 위와 같은 방법으로 매칭시킨다.
			<result column="user_name" property="userName" />
		</association> 
	</resultMap>
    -->
	
	<!-- VO클래스의 필드 예시 2번 
	class명 => CommentUserVO;
	필드 목록 => CommentVO comment; userVO user;
	
	자바 코드
	CommentVO comment = null;
	CommentUserVO cu = null;
	UserVO user = null;
	while(rs.next()){
		comment = new CommentVO();
		comment.setCommentNo(rs.getString("c.comment_content"));
		comment.setUserId(rs.getString("c.user_id"));
		comment.setRegDate(rs.getString("c.reg_date"));
		comment.setUserName(rs.getString("u.user_name"));
		
		user = new UserVO();
		user.setUserId(rs.getString("c.user_id"));
		user.setUserName(rs.getString("u.user_name"));
		
		cu = new CommentUserVO();
		cu.setComment(comment);
		cu.setUser(user);
	}
	return cu;
			  
	오라클 데이터베이스 쿼리문
	select c.comment_no, c.user_id, c.reg_Date, c.comment_content, u.user_name
		from comment c, user u
		where c.user_id = u.user_id //join
		and c.comment_no = #{commentNo}
	
	<resultMap type="Comment" id="commentNUser">
		<association property="comment" column="comment_no" javaType="aaa.bbb.ccc.CommentVO">
			<id />
			<result />
			<result />
			<result />
		</association> 
		<association property="user" column="user_id" javaType="aaa.bbb.ccc.UserVO">
			<id column="user_id" property="userId" />
			<result column="user_name" property="userName" />
		</association> 
	</resultMap>
    -->
	
	<!-- 1:1 맵핑에 의한 resultMap 사용법(나중에라도 이해하면 좋다.) -->
	
</mapper>